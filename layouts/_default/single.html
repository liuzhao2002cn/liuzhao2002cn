{{ define "main" }}

{{ if eq .Section "books" }}
    <!-- å¦‚æœæ˜¯ä¹¦ç±ç« èŠ‚é¡µé¢ -->
    <div class="chapter-content-container">
        <nav class="breadcrumb">
            <a href="/books/" class="breadcrumb-link">ğŸ“š ä¹¦æ¶</a>
            <span class="breadcrumb-separator">â€º</span>
            <a href="{{ .Parent.Permalink }}" class="breadcrumb-link">{{ .Parent.Title }}</a>
            <span class="breadcrumb-separator">â€º</span>
            <span class="breadcrumb-current">å½“å‰ç« èŠ‚</span>
        </nav>

        <article class="chapter-content-page">
            <header class="chapter-content-header">
                <h1 class="chapter-content-title">{{ .Title }}</h1>
                <div class="chapter-content-meta">
                    <span class="meta-item">ğŸ“– çº¦ {{ .ReadingTime }} åˆ†é’Ÿé˜…è¯»</span>
                    {{ with .Date }}
                    <span class="meta-item">ğŸ“… {{ .Format "2006å¹´01æœˆ02æ—¥" }}</span>
                    {{ end }}
                    {{ with .WordCount }}
                    <span class="meta-item">ğŸ“ çº¦ {{ . }} å­—</span>
                    {{ end }}
                </div>
            </header>

            <div class="chapter-text">
                {{ .Content }}
            </div>

            <nav class="chapter-navigation">
                <div class="nav-button prev-chapter">
                    {{ with .PrevInSection }}
                    <a href="{{ .Permalink }}" class="nav-link">
                        â† ä¸Šä¸€ç« 
                    </a>
                    {{ else }}
                    <span class="nav-link disabled">â† ä¸Šä¸€ç« </span>
                    {{ end }}
                </div>

                <a href="{{ .Parent.Permalink }}" class="nav-button back-to-book">
                    è¿”å›ç›®å½•
                </a>

                <div class="nav-button next-chapter">
                    {{ with .NextInSection }}
                    <a href="{{ .Permalink }}" class="nav-link">
                        ä¸‹ä¸€ç«  â†’
                    </a>
                    {{ else }}
                    <span class="nav-link disabled">ä¸‹ä¸€ç«  â†’</span>
                    {{ end }}
                </div>
            </nav>
        </article>
    </div>

{{ else }}
    <!-- å¦‚æœæ˜¯æ™®é€šæ–‡ç« é¡µé¢ï¼ˆåŸæœ‰çš„æ ·å¼ï¼‰ -->
    <article class="post-single post-container">
        <header class="post-header">
            {{ with .Params.image }}
            <div class="post-cover">
                {{ with $.Resources.GetMatch . }}
                    {{ $image := .Resize "1200x webp q75" }}
                    {{ $fallback := .Resize "1200x q75" }}
                    <picture>
                        <source srcset="{{ $image.RelPermalink }}" type="image/webp">
                        <img src="{{ $fallback.RelPermalink }}" width="{{ $fallback.Width }}" height="{{ $fallback.Height }}" alt="{{ $.Title }}" loading="lazy">
                    </picture>
                {{ end }}
            </div>
            {{ end }}
            <h1 class="post-title">{{ .Title }}</h1>
            <div class="post-meta">
                <span class="meta-item"><time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "2006å¹´1æœˆ2æ—¥" }}</time></span>
                {{ with .Params.categories }}<span class="meta-divider">Â·</span><span class="meta-item">{{ range . }}<a href="{{ "/categories/" | relURL }}{{ . | urlize }}/">{{ . }}</a>{{ end }}</span>{{ end }}
                <span class="meta-divider">Â·</span><span class="meta-item">{{ .ReadingTime }} åˆ†é’Ÿé˜…è¯»</span>
            </div>
        </header>
        {{ if .TableOfContents }}
        <details class="toc-container" id="toc" open>
            <summary class="toc-title"><span>ç›®å½•</span></summary>
            <div class="toc-content">{{ .TableOfContents }}</div>
        </details>
        {{ end }}
        <div class="post-content">{{ .Content }}</div>
        <footer class="post-footer">
            {{ with .Params.tags }}<div class="post-tags">{{ range . }}<a href="{{ "/tags/" | relURL }}{{ . | urlize }}/" class="tag-link">#{{ . }}</a>{{ end }}</div>{{ end }}
            {{ partial "share.html" . }}
        </footer>
        {{ partial "related.html" . }}
        {{ partial "comments.html" . }}
    </article>

{{ end }}

{{ end }}
