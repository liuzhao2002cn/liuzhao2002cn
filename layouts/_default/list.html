{{ define "main" }}
<div class="list-page-header">
    {{ if .IsHome }}
        <h1 class="page-title">æ‰€æœ‰æ–‡ç« </h1>
        <p class="page-subtitle">æ¢ç´¢ {{ len .Pages }} ç¯‡ç²¾å½©å†…å®¹</p>
    {{ else if eq .Type "tags" }}
        <h1 class="page-title">
            <span class="title-prefix">æ ‡ç­¾</span>
            <span class="term-name">{{ .Title }}</span>
        </h1>
        <p class="page-subtitle">å…± {{ len .Pages }} ç¯‡ç›¸å…³æ–‡ç« </p>
    {{ else if eq .Type "categories" }}
        <h1 class="page-title">
            <span class="title-prefix">åˆ†ç±»</span>
            <span class="term-name">{{ .Title }}</span>
        </h1>
        <p class="page-subtitle">å…± {{ len .Pages }} ç¯‡ç›¸å…³æ–‡ç« </p>
    {{ else }}
        <h1 class="page-title">{{ .Title }}</h1>
        <p class="page-subtitle">{{ with .Description }}{{ . }}{{ else }}å…± {{ len .Pages }} ç¯‡æ–‡ç« {{ end }}</p>
    {{ end }}
</div>

{{ if .Pages }}
<div class="list-container">
    {{ $paginator := .Paginate .Pages 6 }}
    {{ range $paginator.Pages }}
    <a href="{{ .Permalink }}" class="list-card-link" aria-label="é˜…è¯»æ–‡ç« : {{ .Title }}">
        <article class="list-card">
            <div class="list-card-image-wrapper">
                {{ if .Params.image }}
                    {{ with .Resources.GetMatch .Params.image }}
                        <img src="{{ .RelPermalink }}" 
                             alt="{{ $.Title }}" 
                             class="list-card-image" 
                             loading="lazy"
                             onerror="this.parentElement.innerHTML='<div class=\'placeholder-pattern\'><span class=\'placeholder-icon\'>ğŸ“„</span></div>'">
                    {{ else }}
                        <div class="placeholder-pattern placeholder-gradient">
                            <span class="placeholder-icon">ğŸ“„</span>
                        </div>
                    {{ end }}
                {{ else }}
                    <div class="placeholder-pattern placeholder-gradient">
                        <span class="placeholder-icon">{{ with .Params.emoji }}{{ . }}{{ else }}âœï¸{{ end }}</span>
                    </div>
                {{ end }}
            </div>

            <div class="list-card-content">
                <h2 class="list-card-title">{{ .Title }}</h2>
                
                {{ with .Description }}
                    <p class="list-card-summary">{{ . | plainify | truncate 140 }}</p>
                {{ else }}
                    <p class="list-card-summary">{{ .Summary | plainify | truncate 140 }}</p>
                {{ end }}

                <div class="list-card-meta">
                    <time class="meta-date" datetime="{{ .Date.Format "2006-01-02" }}">
                        <span class="meta-icon">ğŸ“…</span>
                        {{ .Date.Format "2006å¹´01æœˆ02æ—¥" }}
                    </time>
                    <span class="meta-divider">Â·</span>
                    <span class="meta-reading">
                        <span class="meta-icon">â±ï¸</span>
                        {{ .ReadingTime }} åˆ†é’Ÿ
                    </span>
                    {{ if .Params.categories }}
                    <span class="meta-divider">Â·</span>
                    <span class="meta-category">
                        <span class="meta-icon">ğŸ“</span>
                        {{ index .Params.categories 0 }}
                    </span>
                    {{ end }}
                </div>

                {{ with .Params.tags }}
                <div class="list-card-tags">
                    {{ range first 4 . }}
                    <span class="tag">#{{ . }}</span>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </article>
    </a>
    {{ end }}
</div>

{{ partial "pagination.html" . }}

{{ else }}
<div class="empty-state">
    <div class="empty-icon">ğŸ“­</div>
    <h2 class="empty-title">æš‚æ— å†…å®¹</h2>
    <p class="empty-description">è¿™é‡Œè¿˜æ²¡æœ‰æ–‡ç« ï¼Œæ•¬è¯·æœŸå¾…...</p>
    <a href="/" class="empty-button">è¿”å›é¦–é¡µ</a>
</div>
{{ end }}

{{ end }}
