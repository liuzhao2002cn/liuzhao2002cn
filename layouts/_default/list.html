{{ define "main" }}
<div class="list-page-header">
    {{ if .IsHome }}
        <h1 class="page-title">所有文章</h1>
        <p class="page-subtitle">探索 {{ len .Pages }} 篇精彩内容</p>
    {{ else if eq .Type "tags" }}
        <h1 class="page-title">
            <span class="title-prefix">标签</span>
            <span class="term-name">{{ .Title }}</span>
        </h1>
        <p class="page-subtitle">共 {{ len .Pages }} 篇相关文章</p>
    {{ else if eq .Type "categories" }}
        <h1 class="page-title">
            <span class="title-prefix">分类</span>
            <span class="term-name">{{ .Title }}</span>
        </h1>
        <p class="page-subtitle">共 {{ len .Pages }} 篇相关文章</p>
    {{ else }}
        <h1 class="page-title">{{ .Title }}</h1>
        <p class="page-subtitle">{{ with .Description }}{{ . }}{{ else }}共 {{ len .Pages }} 篇文章{{ end }}</p>
    {{ end }}
</div>

{{ if .Pages }}
<div class="list-container">
    {{ $paginator := .Paginate .Pages 6 }}
    {{ range $paginator.Pages }}
    <a href="{{ .Permalink }}" class="list-card-link" aria-label="阅读文章: {{ .Title }}">
        <article class="list-card">
            <div class="list-card-image-wrapper">
                {{ if .Params.image }}
                    {{ with .Resources.GetMatch .Params.image }}
                        <img src="{{ .RelPermalink }}" 
                             alt="{{ $.Title }}" 
                             class="list-card-image" 
                             loading="lazy"
                             onerror="this.parentElement.innerHTML='<div class=\'placeholder-pattern\'><span class=\'placeholder-icon\'>📄</span></div>'">
                    {{ else }}
                        <div class="placeholder-pattern placeholder-gradient">
                            <span class="placeholder-icon">📄</span>
                        </div>
                    {{ end }}
                {{ else }}
                    <div class="placeholder-pattern placeholder-gradient">
                        <span class="placeholder-icon">{{ with .Params.emoji }}{{ . }}{{ else }}✍️{{ end }}</span>
                    </div>
                {{ end }}
            </div>

            <div class="list-card-content">
                <h2 class="list-card-title">{{ .Title }}</h2>
                
                {{ with .Description }}
                    <p class="list-card-summary">{{ . | plainify | truncate 140 }}</p>
                {{ else }}
                    <p class="list-card-summary">{{ .Summary | plainify | truncate 140 }}</p>
                {{ end }}

                <div class="list-card-meta">
                    <time class="meta-date" datetime="{{ .Date.Format "2006-01-02" }}">
                        <span class="meta-icon">📅</span>
                        {{ .Date.Format "2006年01月02日" }}
                    </time>
                    <span class="meta-divider">·</span>
                    <span class="meta-reading">
                        <span class="meta-icon">⏱️</span>
                        {{ .ReadingTime }} 分钟
                    </span>
                    {{ if .Params.categories }}
                    <span class="meta-divider">·</span>
                    <span class="meta-category">
                        <span class="meta-icon">📁</span>
                        {{ index .Params.categories 0 }}
                    </span>
                    {{ end }}
                </div>

                {{ with .Params.tags }}
                <div class="list-card-tags">
                    {{ range first 4 . }}
                    <span class="tag">#{{ . }}</span>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </article>
    </a>
    {{ end }}
</div>

{{ partial "pagination.html" . }}

{{ else }}
<div class="empty-state">
    <div class="empty-icon">📭</div>
    <h2 class="empty-title">暂无内容</h2>
    <p class="empty-description">这里还没有文章，敬请期待...</p>
    <a href="/" class="empty-button">返回首页</a>
</div>
{{ end }}

{{ end }}
