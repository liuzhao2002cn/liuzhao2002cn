{{ define "main" }}
<div id="particles-js"></div>
<section class="hero">
    <div class="hero-background">
        <div class="hero-shape shape-1"></div>
        <div class="hero-shape shape-2"></div>
        <div class="hero-shape shape-3"></div>
        <div class="hero-shape shape-4"></div>
    </div>
    <div class="hero-content personal-intro">
        <div class="floating-elements">
            <div class="floating-element element-1">✨</div>
            <div class="floating-element element-2">🚀</div>
            <div class="floating-element element-3">💫</div>
            <div class="floating-element element-4">🌟</div>
        </div>
        <div class="avatar-container">
            <img src="/images/avatar.png" alt="个人头像" class="intro-avatar">
            <div class="avatar-glow"></div>
        </div>
        <div class="name-title-wrapper">
            <h1 class="intro-name">{{ .Site.Params.author | default .Site.Title }}</h1>
            <div class="title-tags">
                <span class="title-tag">生活</span>
                <span class="title-tag">知识</span>
                <span class="title-tag">心得</span>
            </div>
        </div>
        <div class="typewriter-container">
            <p class="intro-description" id="typewriter-text"></p>
            <span class="typewriter-cursor">|</span>
        </div>
        <div class="stats-container">
            <div class="stat-item"><div class="stat-number" id="post-count">0</div><div class="stat-label">文章</div></div>
            <div class="stat-item"><div class="stat-number" id="tag-count">0</div><div class="stat-label">标签</div></div>
            <div class="stat-item"><div class="stat-number" id="category-count">0</div><div class="stat-label">分类</div></div>
        </div>
        <div class="intro-socials">
            {{ with .Site.Params.github }}
            <a href="{{ . }}" target="_blank" rel="noopener" class="social-icon" title="GitHub">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12..."/></svg>
            </a>{{ end }}
            {{ with .Site.Params.email }}
            <a href="mailto:{{ . }}" class="social-icon" title="邮箱">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2..."/></svg>
            </a>{{ end }}
            {{ with .Site.Params.bilibili }}
            <a href="{{ . }}" target="_blank" rel="noopener" class="social-icon" title="Bilibili">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M17.813 4.653h.854c1.51..."/></svg>
            </a>{{ end }}
            {{ with .Site.Params.douban }}
            <a href="{{ . }}" target="_blank" rel="noopener" class="social-icon" title="豆瓣">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M12 0C5.373 0 0 5.373 0 12..."/></svg>
            </a>{{ end }}
            {{ with .Site.Params.facebook }}
            <a href="{{ . }}" target="_blank" rel="noopener" class="social-icon" title="Facebook">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M24 12.073c0-6.627-5.373-12..."/></svg>
            </a>{{ end }}
        </div>
        <div class="intro-buttons">
            <a href="/explore/" class="intro-button primary"><span>探索博客</span><svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M10 6L8.59 7.41..."/></svg></a>
            <a href="/about/" class="intro-button secondary"><span>关于我</span><svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 2C6.48 2..."/></svg></a>
        </div>
    </div>
    <div class="scroll-indicator"><div class="scroll-arrow"></div><span>向下滚动</span></div>
</section>
<section class="features-section">
    <div class="container">
        <div class="features-grid">
            <a href="/note/" class="feature-card-link"><div class="feature-card"><div class="feature-icon">📚</div><h3>读书笔记</h3><p>分享最近学思的心得、体会与评价（以及某些喜欢的文章的翻译）</p></div></a>
            <a href="/opinion/" class="feature-card-link"><div class="feature-card"><div class="feature-icon">🎨</div><h3>个人评论</h3><p>分享最近个人关于世界的独立思索与想法、时闻世论个人浅见</p></div></a>
            <a href="/life/" class="feature-card-link"><div class="feature-card"><div class="feature-icon">🌍</div><h3>见闻感受</h3><p>学习生活，分享（倾倒）有关“生活”的具身经历与琐碎感受</p></div></a>
        </div>
    </div>
</section>
{{ $pages := where .Site.RegularPages "Type" "posts" }}
<section class="featured-posts">
    <div class="container">
        <div class="section-header"><h2 class="section-title"><span class="title-icon">✨</span><span class="title-text">精选文章</span><span class="title-decoration"></span></h2><p class="section-subtitle">探索最受欢迎的内容</p></div>
        <div class="post-grid">
            {{ $featured := where $pages "Params.featured" true }}
            {{ $displayPosts := $featured | default $pages }}
            {{ range first 3 $displayPosts }}
            {{ $post := . }}
            <a href="{{ .Permalink }}" class="post-card-link">
                <article class="post-card">
                    {{ with .Params.image }}
                    <div class="post-card-image-wrapper">
                        {{ if $post.Resources.GetMatch . }}
                        {{ with $post.Resources.GetMatch . }}
                        {{ $image := .Resize "800x webp q75" }}
                        {{ $fallback := .Resize "800x q75" }}
                        <picture><source srcset="{{ $image.RelPermalink }}" type="image/webp"><img src="{{ $fallback.RelPermalink }}" width="{{ $fallback.Width }}" height="{{ $fallback.Height }}" alt="{{ $post.Title }}" class="post-card-image" loading="lazy"></picture>
                        {{ end }}
                        {{ else }}
                        <img src="{{ . | relURL }}" alt="{{ $post.Title }}" class="post-card-image" loading="lazy">
                        {{ end }}
                        <div class="image-overlay"><span class="read-more-hint">阅读全文 →</span></div>
                    </div>
                    {{ end }}
                    <div class="post-card-content">
                        <h3 class="post-card-title">{{ $post.Title }}</h3>
                        <p class="post-card-summary">{{ $post.Summary | plainify | truncate 100 }}</p>
                        <div class="post-card-meta"><span class="meta-icon">📅</span><span class="post-card-date">{{ $post.Date.Format "2006-01-02" }}</span><span class="meta-divider">·</span><span class="meta-icon">⏱️</span><span class="post-card-reading-time">{{ $post.ReadingTime }} 分钟</span></div>
                        {{ with $post.Params.tags }}
                        <div class="post-card-tags">{{ range first 3 . }}<span class="tag">#{{ . }}</span>{{ end }}</div>
                        {{ end }}
                    </div>
                </article>
            </a>
            {{ else }}
            <div class="empty-state"><div class="empty-icon">📝</div><p class="empty-text">暂无精选文章,敬请期待!</p></div>
            {{ end }}
        </div>
    </div>
</section>
<section class="recent-posts">
    <div class="container">
        <div class="section-header"><h2 class="section-title"><span class="title-icon">⏳</span><span class="title-text">最新发布</span><span class="title-decoration"></span></h2><p class="section-subtitle">最近更新的文章列表</p></div>
        <ul class="recent-post-list">
            {{ range first 5 $pages }}
            <li class="recent-post-item">
                <a href="{{ .Permalink }}" class="recent-post-link">
                    <div class="recent-post-main"><span class="recent-post-indicator"></span><span class="recent-post-title">{{ .Title }}</span></div>
                    <div class="recent-post-info">
                        {{ with .Params.categories }}<span class="recent-post-category">{{ index . 0 }}</span>{{ end }}
                        <span class="recent-post-date">{{ .Date.Format "Jan 2" }}</span>
                    </div>
                </a>
            </li>
            {{ end }}
        </ul>
        <div class="view-all-wrapper"><a href="/posts/" class="view-all-link"><span>查看所有文章</span><svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41..."/></svg></a></div>
    </div>
</section>
<script>
document.addEventListener('DOMContentLoaded',function(){
    if(typeof particlesJS!=='undefined'){particlesJS('particles-js',{particles:{number:{value:80,density:{enable:true,value_area:800}},color:{value:"#6C63FF"},shape:{type:"circle"},opacity:{value:0.5,random:true},size:{value:3,random:true},line_linked:{enable:true,distance:150,color:"#6C63FF",opacity:0.2,width:1},move:{enable:true,speed:2,direction:"none",random:true,straight:false,out_mode:"out",bounce:false}},interactivity:{detect_on:"canvas",events:{onhover:{enable:true,mode:"repulse"},onclick:{enable:true,mode:"push"},resize:true}}});}
    const typewriterText=document.getElementById('typewriter-text');
    const texts=["{{ .Site.Params.description }}","储存思想与生活感悟","记录探索与坚持历程","分享求知与学习经验"];
    let textIndex=0,charIndex=0,isDeleting=false;
    function typeWriter(){const currentText=texts[textIndex];if(isDeleting){typewriterText.textContent=currentText.substring(0,charIndex-1);charIndex--;}else{typewriterText.textContent=currentText.substring(0,charIndex+1);charIndex++;}if(!isDeleting&&charIndex===currentText.length){setTimeout(()=>isDeleting=true,2000);}else if(isDeleting&&charIndex===0){isDeleting=false;textIndex=(textIndex+1)%texts.length;}setTimeout(typeWriter,isDeleting?50:100);}
    setTimeout(typeWriter,1000);
    function animateNumber(element,target,duration=2000){let start=0;const increment=target/(duration/16);const timer=setInterval(()=>{start+=increment;if(start>=target){element.textContent=target;clearInterval(timer);}else{element.textContent=Math.floor(start);}},16);}
    setTimeout(()=>{animateNumber(document.getElementById('post-count'),{{ len $pages }});animateNumber(document.getElementById('tag-count'),15);animateNumber(document.getElementById('category-count'),8);},1500);
});
</script>
{{ end }}
