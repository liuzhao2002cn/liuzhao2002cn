{{ define "main" }}
<!-- 这个文件专门用于章节内容页 -->
<article class="post-single" data-pagefind-body>
    <div class="container">
        <div class="content-wrapper">
            <nav class="breadcrumb" data-pagefind-ignore>
                <a href="/books/" class="breadcrumb-link">📚 书架</a>
                <span class="breadcrumb-separator">›</span>
                <a href="{{ .Parent.Permalink }}" class="breadcrumb-link">{{ .Parent.Title }}</a>
                <span class="breadcrumb-separator">›</span>
                <span class="breadcrumb-current">当前章节</span>
            </nav>

            <div class="chapter-content-page">
                <header class="chapter-content-header">
                    <h1 class="chapter-content-title" data-pagefind-meta="title">{{ .Title }}</h1>
                    <div class="chapter-content-meta">
                        <span class="meta-item">📖 约 {{ .ReadingTime }} 分钟阅读</span>
                        {{ with .Date }}
                        <span class="meta-item">📅 {{ .Format "2006年01月02日" }}</span>
                        {{ end }}
                        {{ with .WordCount }}
                        <span class="meta-item">📝 约 {{ . }} 字</span>
                        {{ end }}
                    </div>
                </header>

                <div class="chapter-text post-content">
                    {{ .Content }}
                </div>

                <nav class="chapter-navigation">
                    <div class="nav-button prev-chapter">
                        {{ with .PrevInSection }}
                        <a href="{{ .Permalink }}" class="nav-link">
                            ← 上一章
                        </a>
                        {{ else }}
                        <span class="nav-link disabled">← 上一章</span>
                        {{ end }}
                    </div>

                    <a href="{{ .Parent.Permalink }}" class="nav-button back-to-book nav-link">
                        返回目录
                    </a>

                    <div class="nav-button next-chapter">
                        {{ with .NextInSection }}
                        <a href="{{ .Permalink }}" class="nav-link">
                            下一章 →
                        </a>
                        {{ else }}
                        <span class="nav-link disabled">下一章 →</span>
                        {{ end }}
                    </div>
                </nav>
            </div>
        </div>
    </div>
</article>

<!-- 固定目录 -->
{{ partial "fixed-toc.html" . }}

<!-- 阅读进度指示器 -->
{{ partial "reading-progress.html" . }}
{{ end }}
