{{ define "main" }}
<div class="books-container">
    <div class="books-header">
        <h1 class="books-title">📚 书架</h1>
        <p class="books-subtitle">学习、学习、再学习</p>
    </div>
    
    {{ $pages := .Sections }}
    {{ if $pages }}
    <div class="books-grid">
        {{ range $pages }}
        <article class="book-card">
            <a href="{{ .Permalink }}" class="book-link">
                <div class="book-cover-wrapper">
                    {{ if .Params.cover }}
                        {{ with .Resources.GetMatch .Params.cover }}
                            <img src="{{ .RelPermalink }}" alt="{{ $.Title }}" class="book-cover" loading="lazy">
                        {{ else }}
                            <div class="book-fallback">
                                <span class="book-fallback-icon">📖</span>
                                <span class="book-fallback-title">{{ .Title }}</span>
                            </div>
                        {{ end }}
                    {{ else }}
                        <div class="book-fallback">
                            <span class="book-fallback-icon">📖</span>
                            <span class="book-fallback-title">{{ .Title }}</span>
                        </div>
                    {{ end }}
                </div>
                <div class="book-info">
                    <h2 class="book-title">{{ .Title }}</h2>
                    <div class="book-meta">
                        {{ with .Params.book_author }}
                        <div class="book-meta-item">
                            <span class="meta-label">作者</span>{{ . }}
                        </div>
                        {{ end }}
                        {{ with .Params.publisher }}
                        <div class="book-meta-item">
                            <span class="meta-label">出版社</span>{{ . }}
                        </div>
                        {{ end }}
                        {{ with .Params.year }}
                        <div class="book-meta-item">
                            <span class="meta-label">出版年</span>{{ . }}
                        </div>
                        {{ end }}
                    </div>
                </div>
            </a>
        </article>
        {{ end }}
    </div>
    {{ else }}
    <div class="empty-state">
        <div class="empty-icon">📚</div>
        <h2 class="empty-title">书架空空如也</h2>
        <p class="empty-description">暂时还没有作品，敬请期待</p>
    </div>
    {{ end }}
</div>
{{ end }}
