<!-- layouts/partials/header.html -->
<header class="site-header">
    <div class="header-content">
        <!-- Â∑¶‰æßÔºöÁΩëÁ´ôÂêçÁß∞ÂíåÁ≠æÂêç -->
        <div class="header-brand">
            <h1 class="site-title">
                <a href="{{ .Site.BaseURL }}" title="{{ .Site.Title }}">
                    {{ .Site.Title }}
                </a>
            </h1>
            {{ if .Site.Params.tagline }}
            <p class="site-tagline">{{ .Site.Params.tagline }}</p>
            {{ end }}
        </div>

        <!-- Âè≥‰æßÔºöÂäüËÉΩÊåâÈíÆ -->
        <div class="header-actions">
            <button class="search-toggle" id="searchToggle" aria-label="ÊêúÁ¥¢" title="ÊêúÁ¥¢">
                <svg class="icon-search" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
            </button>
            
            <button class="sidebar-toggle" id="sidebarToggle" aria-label="ËèúÂçï" title="ÊâìÂºÄËèúÂçï">
                <svg class="icon-menu" viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- ‰æßËæπÊ†èËèúÂçï -->
    <nav class="sidebar-menu" id="sidebarMenu" aria-hidden="true">
        <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->
        <button class="sidebar-close" id="sidebarClose" aria-label="ÂÖ≥Èó≠ËèúÂçï">
            <svg viewBox="0 0 24 24" width="24" height="24">
                <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
        </button>

        <div class="sidebar-container">
            <!-- ‰æßËæπÊ†èÂ§¥ÈÉ® -->
            <div class="sidebar-header">
                <h2 class="sidebar-title">ÂØºËà™ËèúÂçï</h2>
            </div>

            <!-- ËèúÂçïÂàóË°® -->
            <ul class="sidebar-list">
                {{ range .Site.Menus.main }}
                <li class="sidebar-item">
                    <a href="{{ .URL }}" 
                       class="sidebar-link {{ if $.IsMenuCurrent "main" . }}active{{ end }}" 
                       title="{{ .Name }}">
                        <span class="link-icon">{{ .Pre | safeHTML }}</span>
                        <span class="link-text">{{ .Name }}</span>
                        <span class="link-arrow">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/>
                            </svg>
                        </span>
                    </a>
                </li>
                {{ end }}
                
                <!-- ÂàÜÈöîÁ∫ø -->
                <li class="sidebar-divider"></li>

                <!-- ÂèØÈÄâÔºöÂÖ≥‰∫éÈ°µÈù¢ -->
                {{ if .Site.GetPage "/about" }}
                <li class="sidebar-item">
                    <a href="/about/" 
                       class="sidebar-link" 
                       title="ÂÖ≥‰∫é">
                        <span class="link-icon">üë§</span>
                        <span class="link-text">ÂÖ≥‰∫éÊàë</span>
                        <span class="link-arrow">
                            <svg viewBox="0 0 24 24" width="16" height="16">
                                <path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/>
                            </svg>
                        </span>
                    </a>
                </li>
                {{ end }}
            </ul>

            <!-- ‰æßËæπÊ†èÂ∫ïÈÉ®‰ø°ÊÅØ -->
            <div class="sidebar-footer">
                <p class="sidebar-info">
                    {{ with .Site.Params.copyright }}
                    {{ . | safeHTML }}
                    {{ else }}
                    ¬© {{ now.Year }} {{ .Site.Title }}
                    {{ end }}
                </p>
            </div>
        </div>
    </nav>
</header>

<div class="reading-progress" id="readingProgress"></div>
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>  
(function() {
    const menuToggle = document.getElementById('menuToggle');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    
    if (!menuToggle || !dropdownMenu || !menuOverlay) return;
    
    function toggleMenu() {
        const isOpen = menuToggle.getAttribute('aria-expanded') === 'true';
        
        menuToggle.setAttribute('aria-expanded', !isOpen);
        dropdownMenu.setAttribute('aria-hidden', isOpen);
        menuToggle.classList.toggle('active');
        dropdownMenu.classList.toggle('active');
        menuOverlay.classList.toggle('active');
        document.body.style.overflow = isOpen ? '' : 'hidden';
    }
    
    function closeMenu() {
        menuToggle.setAttribute('aria-expanded', 'false');
        dropdownMenu.setAttribute('aria-hidden', 'true');
        menuToggle.classList.remove('active');
        dropdownMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
        document.body.style.overflow = '';
    }
    
    menuToggle.addEventListener('click', toggleMenu);
    menuOverlay.addEventListener('click', closeMenu);
    
    // ÁÇπÂáªËèúÂçïÈ°πÂêéÂÖ≥Èó≠ËèúÂçï
    const menuLinks = dropdownMenu.querySelectorAll('.menu-link');
    menuLinks.forEach(link => {
        link.addEventListener('click', closeMenu);
    });
    
    // ESC ÈîÆÂÖ≥Èó≠ËèúÂçï
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && menuToggle.getAttribute('aria-expanded') === 'true') {
            closeMenu();
        }
    });
})();
</script>
