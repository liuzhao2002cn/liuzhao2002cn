{{- $notePages := where site.RegularPages "Section" "note" -}}
{{- $opinionPages := where site.RegularPages "Section" "opinion" -}}
{{- $lifePages := where site.RegularPages "Section" "life" -}}
{{- $bookPages := where site.RegularPages "Section" "books" -}}

<section class="hero-card-section">
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="hero-background">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="floating-stars"></div>
    </div>

    <!-- ç²’å­èƒŒæ™¯ï¼ˆå¯é€‰ï¼‰ -->
    <div id="hero-particles"></div>

    <!-- ä¸»å¡ç‰‡å®¹å™¨ -->
    <div class="hero-card-container">
        <div class="profile-card" id="profile-card">
            <!-- æ–°å¢: å·¦å³åˆ†æ ç»“æ„ -->
            <div class="card-column-left">
                <!-- å¤´åƒåŒºåŸŸ -->
                <div class="avatar-wrapper">
                    <div class="avatar-glow"></div>
                    <div class="avatar-border">
                        <img src="{{ .Site.Params.avatar | default "/images/avatar.jpg" }}" 
                             alt="{{ .Site.Title }}" 
                             class="avatar-image">
                    </div>
                    <div class="avatar-decoration">
                        <span class="sparkle sparkle-1">âœ¨</span>
                        <span class="sparkle sparkle-2">ğŸ’«</span>
                    </div>
                </div>

                <!-- ç¤¾äº¤é“¾æ¥ (ç§»åˆ°å·¦ä¾§) -->
                <div class="profile-social">
                    {{ with .Site.Params.github }}
                    <a href="{{ . }}" target="_blank" rel="noopener" class="social-link" title="GitHub">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    </a>
                    {{ end }}
                    {{ with .Site.Params.douban }}
                    <a href="{{ . }}" target="_blank" rel="noopener" class="social-link" title="è±†ç“£">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M15.371 5.407h-8.24V2.594h8.24v2.813zm.968 2.187H6.39v6.426h9.949V7.594zm-1.455 5.156H7.844V8.938h6.878v3.812zM5.902 17.25l-.808 3.516h12.786l-.808-3.516H5.902zm13.662-1.031c0-.516-.437-.938-1-.938H4.155c-.518 0-.968.422-.968.938v.906h16.377v-.906z"/></svg>
                    </a>
                    {{ end }}
                    {{ with .Site.Params.bilibili }}
                    <a href="{{ . }}" target="_blank" rel="noopener" class="social-link" title="å“”å“©å“”å“©">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92-.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .355-.124.657-.373.906zM8 11.107c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c0-.373.129-.689.386-.947.258-.257.574-.386.947-.386zm8 0c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373Z"/></svg>
                    </a>
                    {{ end }}
                </div>
            </div>

            <div class="card-column-right">
                <!-- ä¸ªäººä¿¡æ¯ -->
                <div class="profile-info">
                    <h1 class="profile-name">{{ .Site.Params.displayName | default .Site.Title }}</h1>
                    {{ with .Site.Params.tagline }}
                    <p class="profile-tagline">{{ . }}</p>
                    {{ end }}

                    <!-- æ ¼è¨€åŒºåŸŸ -->
                    {{ if .Site.Params.quotes }}
                    <div class="profile-quotes">
                        {{ range .Site.Params.quotes }}
                        <blockquote class="hero-quote">
                            <p class="quote-text">{{ .text }}</p>
                            <cite class="quote-author">â€”â€” {{ .author }}</cite>
                        </blockquote>
                        {{ end }}
                    </div>
                    {{ end }}

                    <!-- ä¸ªäººç®€ä»‹ -->
                    {{ with .Site.Params.bio }}
                    <div class="profile-bio-section">
                        <p class="profile-bio">{{ . }}</p>
                    </div>
                    {{ end }}
                </div>

                <!-- æ ‡ç­¾äº‘ -->
                <div class="profile-tags">
                    {{ range .Site.Params.tags }}
                    <span class="tag">{{ . }}</span>
                    {{ end }}
                </div>

                <!-- ç»Ÿè®¡æ•°æ® -->
                {{ if .Site.Params.showStats }}
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-value">{{ len (where .Site.RegularPages "Type" "note") }}</div>
                        <div class="stat-label">ç¬”è®°</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <div class="stat-value">{{ len (where .Site.RegularPages "Type" "opinion") }}</div>
                        <div class="stat-label">è¯„è®º</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <div class="stat-value">{{ len .Site.RegularPages }}</div>
                        <div class="stat-label">æ€»è®¡</div>
                    </div>
                </div>
                {{ end }}
            </div>
        </div>
    </div>

    <!-- å‘ä¸‹ç®­å¤´ -->
    <a href="#content-sections" class="scroll-indicator">
        <svg viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
    </a>
</section>

<!-- å†…å®¹åˆ†ç±»å¡ç‰‡åŒº -->
<section id="content-sections" class="content-sections">
    <div class="sections-grid">
        <a href="/note/" class="section-card">
            <div class="card-content"><div class="card-icon">ğŸ“š</div><h3 class="card-title">è¯»ä¹¦ç¬”è®°</h3><p class="card-description">é˜…è¯»æ€è€ƒä¸çŸ¥è¯†æ²‰æ·€</p><div class="card-meta"><span>{{ len $notePages }} ç¯‡</span></div></div><div class="card-hover-effect"></div>
        </a>
        <a href="/opinion/" class="section-card">
            <div class="card-content"><div class="card-icon">ğŸ¨</div><h3 class="card-title">ä¸ªäººè¯„è®º</h3><p class="card-description">ç‹¬ç«‹æ€è€ƒä¸è§‚ç‚¹è¡¨è¾¾</p><div class="card-meta"><span>{{ len $opinionPages }} ç¯‡</span></div></div><div class="card-hover-effect"></div>
        </a>
        <a href="/life/" class="section-card">
            <div class="card-content"><div class="card-icon">ğŸŒ</div><h3 class="card-title">è§é—»æ„Ÿå—</h3><p class="card-description">ç”Ÿæ´»ä½“éªŒä¸æƒ…æ„Ÿè®°å½•</p><div class="card-meta"><span>{{ len $lifePages }} ç¯‡</span></div></div><div class="card-hover-effect"></div>
        </a>
        <a href="/books/" class="section-card">
            <div class="card-content"><div class="card-icon">ğŸ“–</div><h3 class="card-title">æˆ‘çš„ä¹¦ç±</h3><p class="card-description">ç¿»è¯‘ä½œå“ä¸åŸåˆ›ä¹¦ç±</p><div class="card-meta"><span>{{ len $bookPages }} æœ¬</span></div></div><div class="card-hover-effect"></div>
        </a>
    </div>
</section>

<!-- JS for 3D Tilt Effect -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const card = document.getElementById('profile-card');
    if (!card) return;

    const maxRotate = 15; // æœ€å¤§å€¾æ–œè§’åº¦

    // ä»…åœ¨éè§¦æ‘¸è®¾å¤‡ä¸Šå¯ç”¨3Dæ•ˆæœ, é¿å…ç§»åŠ¨ç«¯é—®é¢˜
    if (!('ontouchstart' in window)) {
        card.addEventListener('mousemove', function(e) {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const { width, height } = rect;

            const rotateX = maxRotate * ((y / height) - 0.5) * -1;
            const rotateY = maxRotate * ((x / width) - 0.5);

            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
        });

        card.addEventListener('mouseleave', function() {
            card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1)';
        });
    }
});
</script>
